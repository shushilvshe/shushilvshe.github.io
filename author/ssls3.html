<!DOCTYPE html>
<!--[if lt IE 7]>      <html lang="zh_cn" class="no-js lt-ie9 lt-ie8 lt-ie7" prefix="og: http://ogp.me/ns#" itemscope itemtype="http://schema.org/Blog"> <![endif]-->
<!--[if IE 7]>         <html lang="zh_cn" class="no-js lt-ie9 lt-ie8" prefix="og: http://ogp.me/ns#" itemscope itemtype="http://schema.org/Blog"> <![endif]-->
<!--[if IE 8]>         <html lang="zh_cn" class="no-js lt-ie9" prefix="og: http://ogp.me/ns#" itemscope itemtype="http://schema.org/Blog"> <![endif]-->
<!--[if gt IE 8]><!--> <html lang="zh_cn" class="no-js" prefix="og: http://ogp.me/ns#" itemscope itemtype="http://schema.org/Blog"> <!--<![endif]-->
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>shushilvshe's Blog - Articles by ssls</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<link rel="shortcut icon" href="http://www.shushilvshe.com/http://www.shushilvshe.com/images/lvcheng.jpg" type="">
<meta name="author" content="ssls">
<meta name="copyright" content="ssls">
<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="@" />
<meta property="og:site_name" content="shushilvshe's Blog" />
<meta property="og:title" content="shushilvshe's Blog" />
<meta property="og:type" content="website" />
<meta property="og:url" content="http://www.shushilvshe.com" />
<meta name="twitter:url" content="http://www.shushilvshe.com" />
<meta itemprop="name" content="shushilvshe's Blog" />
<meta itemprop="url" content="http://www.shushilvshe.com"/>
<link href="http://www.shushilvshe.com/None" type="application/atom+xml" rel="alternate" title="shushilvshe's Blog ATOM Feed"/>
<link href='//fonts.googleapis.com/css?family=Open+Sans:800italic' rel='stylesheet' type='text/css'>
<link href='//fonts.googleapis.com/css?family=Oswald' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/uikit/2.23.0/css/uikit.min.css">
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/uikit/2.23.0/css/components/search.min.css">
<link rel="stylesheet" href="http://www.shushilvshe.com/theme/css/tipuesearch.css">
<link rel="stylesheet" href="http://www.shushilvshe.com/theme/css/solarized.css">
<link rel="stylesheet" href="http://www.shushilvshe.com/theme/css/main.css">

<script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.2/html5shiv.min.js"></script>
</head>
<body>
<!--[if lt IE 7]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

<header class=" mg-header uk-navbar uk-navbar-attached">

    <div class="uk-container uk-container-center">

        <a class="mg-brand uk-navbar-brand uk-hidden-small" href="http://www.shushilvshe.com">shushilvshe's Blog</a>
        <div class="mg-tagline uk-navbar-content uk-hidden-small">Data Developer</div>
        <a class="uk-navbar-toggle uk-visible-small" href="#mg-offcanvas" data-uk-offcanvas></a>
        <a class="mg-brand uk-navbar-brand uk-navbar-center uk-visible-small" href="http://www.shushilvshe.com">shushilvshe's Blog</a>

    </div>
</header>

<main class="mg-main">

<div class="uk-container uk-container-center">

    <div class="uk-grid" data-uk-grid-margin>

<div class="uk-width-medium-4-5">


            <article class="uk-article" itemtype="http://schema.org/BlogPosting" itemscope="itemscope" itemprop="blogPost">
                <a href="http://www.shushilvshe.com/data/python-base.html" class="uk-article-title uk-link-muted" itemprop="name">python常用功能总结</a>
                <p class="uk-article-meta"><time datetime="2017-09-06" itemprop="datePublished">2017-09-06(星期三) 10:09</time> • <a href="http://www.shushilvshe.com/category/data.html">Data</a></p>
</p>
                <p class="uk-article-lead" itemprop="description">python常用功能总结</p>
                <section itemprop="articleBody"><p><strong>目录：</strong></p>
<p><link rel="stylesheet" href="http://yandex.st/highlightjs/6.2/styles/googlecode.min.css"></p>
<script src="http://code.jquery.com/jquery-1.7.2.min.js"></script>

<script src="http://yandex.st/highlightjs/6.2/highlight.min.js"></script>

<script>hljs.initHighlightingOnLoad();</script>

<script type="text/javascript">
 $(document).ready(function(){
      $("h2,h3,h4,h5,h6").each(function(i,item){
        var tag = $(item).get(0).localName;
        $(item).attr("id","wow"+i);
        $("#category").append('<a class="new'+tag+'" href="#wow'+i+'">'+$(this).text()+'</a></br>');
        $(".newh2").css("margin-left",0);
        $(".newh3").css("margin-left",20);
        $(".newh4").css("margin-left",40);
        $(".newh5").css("margin-left",60);
        $(".newh6").css("margin-left",80);
      });
 });
</script>

<div id="category"></div>

<h2>一、文件操作</h2>
<hr>
<ul>
<li>
<h3>1.os.path模块</h3>
<ul>
<li><strong>1.os.path.abspath(path)</strong> </li>
</ul>
<p>返回path规范化的绝对路径。 </p>
<div class="highlight"><pre><span></span>&gt;&gt;&gt; os.path.abspath(&#39;test.csv&#39;) 
&#39;C:\\Python25\\test.csv&#39;     
&gt;&gt;&gt; os.path.abspath(&#39;c:\\test.csv&#39;) 
&#39;c:\\test.csv&#39;   
&gt;&gt;&gt; os.path.abspath(&#39;../csv\\test.csv&#39;) 
&#39;C:\\csv\\test.csv&#39;
</pre></div>


<ul>
<li><strong>2.os.path.split(path)</strong> </li>
</ul>
<p>将path分割成目录和文件名二元组返回。 </p>
<div class="highlight"><pre><span></span>&gt;&gt;&gt; os.path.split(&#39;c:\\csv\\test.csv&#39;) 
(&#39;c:\\csv&#39;, &#39;test.csv&#39;) 
&gt;&gt;&gt; os.path.split(&#39;c:\\csv\\&#39;) 
(&#39;c:\\csv&#39;, &#39;&#39;)
</pre></div>


<ul>
<li><strong>3.os.path.dirname(path)</strong> </li>
</ul>
<p>返回path的目录。其实就是os.path.split(path)的第一个元素。 </p>
<div class="highlight"><pre><span></span>&gt;&gt;&gt; os.path.dirname(&#39;c:\\csv\test.csv&#39;) 
&#39;c:\\&#39; 
&gt;&gt;&gt; os.path.dirname(&#39;c:\\csv&#39;) 
&#39;c:\\&#39;
</pre></div>


<ul>
<li><strong>4.os.path.basename(path)</strong> </li>
</ul>
<p>返回path最后的文件名。如何path以／或\结尾，那么就会返回空值。即os.path.split(path)的第二个元素。 </p>
<div class="highlight"><pre><span></span>&gt;&gt;&gt; os.path.basename(&#39;c:\\test.csv&#39;) 
&#39;test.csv&#39; 
&gt;&gt;&gt; os.path.basename(&#39;c:\\csv&#39;) 
&#39;csv&#39; （这里csv被当作文件名处理了） 
&gt;&gt;&gt; os.path.basename(&#39;c:\\csv\\&#39;) 
&#39;&#39;
</pre></div>


<ul>
<li><strong>5.os.path.commonprefix(list)</strong> </li>
</ul>
<p>返回list中，所有path共有的最长的路径。 </p>
<p>如： 
    &gt;&gt;&gt; os.path.commonprefix(['/home/td','/home/td/ff','/home/td/fff']) 
    '/home/td' </p>
<ul>
<li><strong>6.os.path.exists(path)</strong></li>
</ul>
<p>如果path存在，返回True；如果path不存在，返回False。 </p>
<div class="highlight"><pre><span></span>&gt;&gt;&gt; os.path.exists(&#39;c:\\&#39;) 
True 
&gt;&gt;&gt; os.path.exists(&#39;c:\\csv\\test.csv&#39;) 
False
</pre></div>


<ul>
<li><strong>7.os.path.isabs(path)</strong> </li>
</ul>
<p>如果path是绝对路径，返回True。 </p>
<ul>
<li><strong>8.os.path.isfile(path)</strong> </li>
</ul>
<p>如果path是一个存在的文件，返回True。否则返回False。 </p>
<div class="highlight"><pre><span></span>&gt;&gt;&gt; os.path.isfile(&#39;c:\\boot.ini&#39;) 
True 
&gt;&gt;&gt; os.path.isfile(&#39;c:\\csv\\test.csv&#39;) 
False 
&gt;&gt;&gt; os.path.isfile(&#39;c:\\csv\\&#39;) 
False
</pre></div>


<ul>
<li><strong>9.os.path.isdir(path)</strong> </li>
</ul>
<p>如果path是一个存在的目录，则返回True。否则返回False。 </p>
<div class="highlight"><pre><span></span>&gt;&gt;&gt; os.path.isdir(&#39;c:\\&#39;) 
True 
&gt;&gt;&gt; os.path.isdir(&#39;c:\\csv\\&#39;) 
False 
&gt;&gt;&gt; os.path.isdir(&#39;c:\\windows\\test.csv&#39;) 
False
</pre></div>


<ul>
<li><strong>10.os.path.join(path1[, path2[, ...]])</strong> </li>
</ul>
<p>将多个路径组合后返回，第一个绝对路径之前的参数将被忽略。 </p>
<div class="highlight"><pre><span></span>&gt;&gt;&gt; os.path.join(&#39;c:\\&#39;, &#39;csv&#39;, &#39;test.csv&#39;) 
&#39;c:\\csv\\test.csv&#39; 
&gt;&gt;&gt; os.path.join(&#39;windows\temp&#39;, &#39;c:\\&#39;, &#39;csv&#39;, &#39;test.csv&#39;) 
&#39;c:\\csv\\test.csv&#39; 
&gt;&gt;&gt; os.path.join(&#39;/home/aa&#39;,&#39;/home/aa/bb&#39;,&#39;/home/aa/bb/c&#39;) 
&#39;/home/aa/bb/c&#39;
</pre></div>


<ul>
<li><strong>11.os.path.normcase(path)</strong> </li>
</ul>
<p>在Linux和Mac平台上，该函数会原样返回path，在windows平台上会将路径中所有字符转换为小写，并将所有斜杠转换为饭斜杠。 </p>
<div class="highlight"><pre><span></span>&gt;&gt;&gt; os.path.normcase(&#39;c:/windows\\system32\\&#39;) 
&#39;c:\\windows\\system32\\&#39;
</pre></div>


<ul>
<li><strong>12.os.path.normpath(path)</strong> </li>
</ul>
<p>规范化路径。 </p>
<div class="highlight"><pre><span></span>&gt;&gt;&gt; os.path.normpath(&#39;c://windows\\System32\\../Temp/&#39;) 
&#39;c:\\windows\\Temp&#39;
</pre></div>


<ul>
<li><strong>13.os.path.splitdrive(path)</strong> </li>
</ul>
<p>返回（drivername，fpath）元组 </p>
<div class="highlight"><pre><span></span>&gt;&gt;&gt; os.path.splitdrive(&#39;c:\\windows&#39;) 
(&#39;c:&#39;, &#39;\\windows&#39;)
</pre></div>


<ul>
<li><strong>14.os.path.splitext(path)</strong> </li>
</ul>
<p>分离文件名与扩展名；默认返回(fname,fextension)元组，可做分片操作 </p>
<div class="highlight"><pre><span></span>&gt;&gt;&gt; os.path.splitext(&#39;c:\\csv\\test.csv&#39;) 
(&#39;c:\\csv\\test&#39;, &#39;.csv&#39;)
</pre></div>


<ul>
<li><strong>15.os.path.getsize(path)</strong> </li>
</ul>
<p>返回path的文件的大小（字节）。 </p>
<div class="highlight"><pre><span></span>&gt;&gt;&gt; os.path.getsize(&#39;c:\\boot.ini&#39;) 
299L
</pre></div>


<ul>
<li><strong>16.os.path.getatime(path)</strong> </li>
</ul>
<p>返回path所指向的文件或者目录的最后存取时间。 </p>
<ul>
<li><strong>17.os.path.getmtime(path)</strong> </li>
</ul>
<p>返回path所指向的文件或者目录的最后修改时间</p>
</li>
</ul>
<hr>
<ul>
<li>
<h3>2.Python获取指定文件夹下的文件名</h3>
<p>采用os.walk()和os.listdir()两种方法，获取指定文件夹下的文件名。</p>
<ul>
<li><strong>一、os.walk()</strong></li>
</ul>
<p>模块os中的walk()函数可以遍历文件夹下所有的文件。</p>
<div class="highlight"><pre><span></span>os.walk(top, topdown=Ture, onerror=None, followlinks=False)
</pre></div>


<p>该函数可以得到一个三元tupple(dirpath, dirnames, filenames).</p>
<p>参数含义：
- dirpath：string，代表目录的路径；
- dirnames：list，包含了当前dirpath路径下所有的子目录名字（不包含目录路径）；
- filenames：list，包含了当前dirpath路径下所有的非目录子文件的名字（不包含目录路径）。</p>
<p>注意，<strong>dirnames和filenames均不包含路径信息</strong>，如需完整路径，可使用os.path.join(dirpath, dirnames)</p>
<p>下面给出代码;</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="k">def</span> <span class="nf">file_name</span><span class="p">(</span><span class="n">file_dir</span><span class="p">):</span> 
    <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">file_dir</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="n">root</span><span class="p">)</span> <span class="c1">#当前目录路径</span>
        <span class="k">print</span><span class="p">(</span><span class="n">dirs</span><span class="p">)</span> <span class="c1">#当前路径下所有子目录</span>
        <span class="k">print</span><span class="p">(</span><span class="n">files</span><span class="p">)</span> <span class="c1">#当前路径下所有非目录子文件</span>
</pre></div>


<p>当需要特定类型的文件时，代码如下：</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="k">def</span> <span class="nf">file_name</span><span class="p">(</span><span class="n">file_dir</span><span class="p">):</span> 
    <span class="n">L</span><span class="o">=</span><span class="p">[]</span> 
    <span class="k">for</span> <span class="n">root</span><span class="p">,</span> <span class="n">dirs</span><span class="p">,</span> <span class="n">files</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">file_dir</span><span class="p">):</span>
        <span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="nb">file</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;.jpeg&#39;</span><span class="p">:</span>
                <span class="n">L</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="nb">file</span><span class="p">))</span>
    <span class="k">return</span> <span class="n">L</span>
</pre></div>


<p>其中os.path.splitext()函数将路径拆分为文件名+扩展名，例如os.path.splitext(“E:/lena.jpg”)将得到”E:/lena“+".jpg"。</p>
<ul>
<li><strong>二、os.listdir()</strong></li>
</ul>
<p>os.listdir()函数得到的是仅当前路径下的文件名，不包括子目录中的文件，所有需要使用递归的方法得到全部文件名。</p>
<p>直接给出代码，函数将返回类型为‘.jpeg’个文件名：</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>

<span class="k">def</span> <span class="nf">listdir</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">list_name</span><span class="p">):</span>
    <span class="k">for</span> <span class="nb">file</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="nb">file</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="n">file_path</span><span class="p">):</span>
            <span class="n">listdir</span><span class="p">(</span><span class="n">file_path</span><span class="p">,</span> <span class="n">list_name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">file_path</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">==</span><span class="s1">&#39;.jpeg&#39;</span><span class="p">:</span>
            <span class="n">list_name</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
</pre></div>


</li>
</ul>
<hr>
<h2>二、时间操作</h2>
<ul>
<li>
<h3>python时间戳、时间数组、时间字符串相互转化</h3>
<ul>
<li>
<p>1.将字符串的时间转换为时间戳</p>
<p>方法:将其转换为时间数组，再转换为时间戳。例： a = "2013-10-10 23:40:00"</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="n">timeArray</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">)</span>
<span class="n">timeStamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">mktime</span><span class="p">(</span><span class="n">timeArray</span><span class="p">))</span>
<span class="n">timeStamp</span> <span class="o">==</span> <span class="mi">1381419600</span>
</pre></div>


</li>
<li>
<p>2.字符串格式更改</p>
<p>方法:先转换为时间数组,然后转换为其他格式。例： a = "2013-10-10 23:40:00", 改为 a = "2013/10/10 23:40:00"</p>
<div class="highlight"><pre><span></span>timeArray = time.strptime(a, &quot;%Y-%m-%d %H:%M:%S&quot;)
otherStyleTime = time.strftime(&quot;%Y/%m/%d %H:%M:%S&quot;, timeArray)
</pre></div>


</li>
<li>
<p>3.时间戳转换为指定格式日期:</p>
<p>方法一: 利用localtime()转换为时间数组,然后格式化为需要的格式,如</p>
<div class="highlight"><pre><span></span>timeStamp = 1381419600
timeArray = time.localtime(timeStamp)
otherStyleTime = time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, timeArray)
otherStyletime == &quot;2013-10-10 23:40:00&quot;
</pre></div>


<p>方法二:</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="n">timeStamp</span> <span class="o">=</span> <span class="mi">1381419600</span>
<span class="n">dateArray</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcfromtimestamp</span><span class="p">(</span><span class="n">timeStamp</span><span class="p">)</span>
<span class="n">otherStyleTime</span> <span class="o">=</span> <span class="n">dateArray</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">)</span>
<span class="n">otherStyletime</span> <span class="o">==</span> <span class="s2">&quot;2013-10-10 23:40:00&quot;</span>
</pre></div>


</li>
<li>
<p>4.获取当前时间并转换为指定日期格式</p>
<p>方法一:</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="n">now</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">())</span>  <span class="c1">#这是时间戳</span>
<span class="n">timeArray</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">(</span><span class="n">timeStamp</span><span class="p">)</span>
<span class="n">otherStyleTime</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">,</span> <span class="n">timeArray</span><span class="p">)</span>
</pre></div>


<p>方法二:</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="n">now</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>  <span class="c1">#这是时间数组格式</span>
<span class="n">otherStyleTime</span> <span class="o">=</span> <span class="n">now</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">)</span>
</pre></div>


</li>
<li>
<p>5.获得三天前的时间</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">time</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="n">threeDayAgo</span> <span class="o">=</span> <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span> <span class="o">=</span> <span class="mi">3</span><span class="p">))</span>
<span class="c1">#转换为时间戳:</span>
<span class="n">timeStamp</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">mktime</span><span class="p">(</span><span class="n">threeDayAgo</span><span class="o">.</span><span class="n">timetuple</span><span class="p">()))</span>
<span class="c1">#转换为其他字符串格式:</span>
<span class="n">otherStyleTime</span> <span class="o">=</span> <span class="n">threeDayAgo</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&quot;%Y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&quot;</span><span class="p">)</span>
</pre></div>


<p>注:timedelta()的参数有:days,hours,seconds,microseconds</p>
</li>
<li>
<p>6.给定时间戳,计算该时间的几天前时间:</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">time</span>

<span class="n">timeStamp</span> <span class="o">=</span> <span class="mi">1381419600</span>
<span class="c1">#先转换为datetime</span>
<span class="n">dateArray</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">utcfromtimestamp</span><span class="p">(</span><span class="n">timeStamp</span><span class="p">)</span>
<span class="n">threeDayAgo</span> <span class="o">=</span> <span class="n">dateArray</span> <span class="o">-</span> <span class="n">datetime</span><span class="o">.</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span> <span class="o">=</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>


<p>参考5,可以转换为其他的任意格式了</p>
</li>
</ul>
</li>
</ul>
<h2>九、其他</h2>
<ul>
<li>
<h3>1.python执行shell命令</h3>
<ul>
<li>
<p><strong>1 os.system</strong></p>
<p>可以返回运行shell命令状态，同时会在终端输出运行结果</p>
<p>例如 ipython中运行如下命令，返回运行状态status</p>
<div class="highlight"><pre><span></span>os.system(&#39;cat /etc/passwdqc.conf&#39;)
min=disabled,24,11,8,7
max=40
passphrase=3
match=4
similar=deny
random=47
enforce=everyone
retry=3
Out[6]: 0
</pre></div>


</li>
<li>
<p><strong>2 os.popen()</strong></p>
<p>可以返回运行结果</p>
<div class="highlight"><pre><span></span>popen(command [, mode=&#39;r&#39; [, bufsize]]) -&gt; pipe
Open a pipe to/from a command returning a file object.
</pre></div>


<p>运行返回结果</p>
<div class="highlight"><pre><span></span>In [20]: output = os.popen(&#39;cat /proc/cpuinfo&#39;)

In [21]: lineLen = []

In [22]: for line in output.readlines():
    lineLen.append(len(line))
   ....:

In [23]: line
line     lineLen

In [23]: lineLen
Out[23]: 
[14,
 25,
...
</pre></div>


</li>
<li>
<p><strong>3 如何同时返回结果和运行状态，commands模块:</strong></p>
<p>#String form: <module 'commands' from '/usr/lib64/python2.7/commands.pyc'>
File: /usr/lib64/python2.7/commands.py
Docstring:
Execute shell commands via os.popen() and return status, output.</p>
<p>Interface summary:</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">commands</span>

<span class="n">outtext</span> <span class="o">=</span> <span class="n">commands</span><span class="o">.</span><span class="n">getoutput</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
<span class="p">(</span><span class="n">exitstatus</span><span class="p">,</span> <span class="n">outtext</span><span class="p">)</span> <span class="o">=</span> <span class="n">commands</span><span class="o">.</span><span class="n">getstatusoutput</span><span class="p">(</span><span class="n">cmd</span><span class="p">)</span>
<span class="n">outtext</span> <span class="o">=</span> <span class="n">commands</span><span class="o">.</span><span class="n">getstatus</span><span class="p">(</span><span class="nb">file</span><span class="p">)</span> <span class="c1"># returns output of &quot;ls -ld file&quot;</span>

<span class="n">A</span> <span class="n">trailing</span> <span class="n">newline</span> <span class="ow">is</span> <span class="n">removed</span> <span class="kn">from</span> <span class="nn">the</span> <span class="nn">output</span> <span class="nn">string.</span>

<span class="n">Encapsulates</span> <span class="n">the</span> <span class="n">basic</span> <span class="n">operation</span><span class="p">:</span>

<span class="n">pipe</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">popen</span><span class="p">(</span><span class="s1">&#39;{ &#39;</span> <span class="o">+</span> <span class="n">cmd</span> <span class="o">+</span> <span class="s1">&#39;; } 2&gt;&amp;1&#39;</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span>
<span class="n">text</span> <span class="o">=</span> <span class="n">pipe</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="n">sts</span> <span class="o">=</span> <span class="n">pipe</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>


<p>commands示例如下:</p>
<div class="highlight"><pre><span></span>In [24]: (status, output) = commands.getstatusoutput(&#39;cat /proc/cpuinfo&#39;)

In [25]: status
Out[25]: 0

In [26]: len(output)
Out[26]: 3859
</pre></div>


</li>
<li>
<p><strong>4 使用模块subprocess</strong></p>
<p>通常项目中经常使用方法为subporcess.Popen, 我们可以在Popen()建立子进程的时候改变标准输入、标准输出和标准错误，并可以利用subprocess.PIPE将多个子进程的输入和输出连接在一起，构成管道(pipe):</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">subprocess</span>
<span class="n">child1</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">([</span><span class="s2">&quot;ls&quot;</span><span class="p">,</span><span class="s2">&quot;-l&quot;</span><span class="p">],</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">)</span>
<span class="n">child2</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">([</span><span class="s2">&quot;wc&quot;</span><span class="p">],</span> <span class="n">stdin</span><span class="o">=</span><span class="n">child1</span><span class="o">.</span><span class="n">stdout</span><span class="p">,</span><span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">)</span>
<span class="n">out</span> <span class="o">=</span> <span class="n">child2</span><span class="o">.</span><span class="n">communicate</span><span class="p">()</span>
<span class="k">print</span><span class="p">(</span><span class="n">out</span><span class="p">)</span>
</pre></div>


<p>在例如使用lsblk查看swap分区的uuid：</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">subprocess</span>

<span class="n">child</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">([</span><span class="s2">&quot;lsblk&quot;</span><span class="p">,</span> <span class="s2">&quot;-f&quot;</span><span class="p">],</span> <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">PIPE</span><span class="p">)</span>
<span class="n">out</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>

<span class="n">swap_uuid</span> <span class="o">=</span> <span class="bp">None</span>
<span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">out</span><span class="p">:</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="p">)</span> <span class="o">==</span> <span class="mi">4</span><span class="p">:</span>
        <span class="k">if</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;swap&#39;</span><span class="p">):</span>
            <span class="n">swap_uuid</span> <span class="o">=</span> <span class="n">line</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">swap_uuid</span><span class="p">)</span>
</pre></div>


<p>ipython 中运行"?subprocess"可以发现subprocess是python用来替换os.popen()等管道操作命令的新模块。</p>
<p>A more real-world example would look like this:</p>
<div class="highlight"><pre><span></span><span class="k">try</span><span class="o">:</span>
    <span class="n">retcode</span> <span class="o">=</span> <span class="n">call</span><span class="o">(</span><span class="s2">&quot;mycmd&quot;</span> <span class="o">+</span> <span class="s2">&quot; myarg&quot;</span><span class="o">,</span> <span class="n">shell</span><span class="o">=</span><span class="n">True</span><span class="o">)</span>
    <span class="k">if</span> <span class="n">retcode</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="o">:</span>
        <span class="n">print</span> <span class="o">&gt;&gt;</span><span class="n">sys</span><span class="o">.</span><span class="na">stderr</span><span class="o">,</span> <span class="s2">&quot;Child was terminated by signal&quot;</span><span class="o">,</span> <span class="o">-</span><span class="n">retcode</span>
    <span class="k">else</span><span class="o">:</span>
        <span class="n">print</span> <span class="o">&gt;&gt;</span><span class="n">sys</span><span class="o">.</span><span class="na">stderr</span><span class="o">,</span> <span class="s2">&quot;Child returned&quot;</span><span class="o">,</span> <span class="n">retcode</span>
<span class="n">except</span> <span class="n">OSError</span><span class="o">,</span> <span class="n">e</span><span class="o">:</span>
    <span class="n">print</span> <span class="o">&gt;&gt;</span><span class="n">sys</span><span class="o">.</span><span class="na">stderr</span><span class="o">,</span> <span class="s2">&quot;Execution failed:&quot;</span><span class="o">,</span> <span class="n">e</span>
</pre></div>


<p>相对于上面几种方式，subprocess便于控制和监控进程运行结果,subprocess提供多种函数便于应对父进程对子进程不同要求:</p>
<ul>
<li>4.1.1 subprocess.call()</li>
</ul>
<p>父进程父进程等待子进程完成，返回exit code</p>
<ul>
<li>
<p>4.1.2 subprocess.check_call()</p>
<p>父进程等待子进程完成,返回0，如果returncode不为0，则举出错误subprocess.CalledProcessError，该对象包含有returncode属性，可用try...except...来检查</p>
</li>
<li>
<p>4.1.3 subprocess.check_output()</p>
</li>
</ul>
<p>父进程等待子进程完成</p>
<p>返回子进程向标准输出的输出结果</p>
<p>检查退出信息，如果returncode不为0，则举出错误subprocess.CalledProcessError，该对象包含有returncode属性和output属性，output属性为标准输出的输出结果，可用try...except...来检查</p>
<p>例如:</p>
<div class="highlight"><pre><span></span>In [32]: out = subprocess.call(&quot;ls -l&quot;, shell=True)
total 42244
-rw-rw-r--.  1 *** ***     366 May 26 09:10 ChangeLog
</pre></div>


<ul>
<li>4.2.1 </li>
</ul>
<p>上面三个函数都是源于Popen()函数的wapper(封装),如果需要更加个性化应用，那么就需要使用popen()函数</p>
<p>Popen对象创建后，主程序不会自动等待子进程完成。我们必须调用对象的wait()方法，父进程才会等待 (也就是阻塞block)</p>
<div class="highlight"><pre><span></span>[wenwt@localhost syntax]$ rm subprocess.pyc 
[wenwt@localhost syntax]$ python process.py 
parent process
[wenwt@localhost syntax]$ PING www.google.com (173.194.219.99) 56(84) bytes of data.
^C
[wenwt@localhost syntax]$ 
--- www.google.com ping statistics ---
5 packets transmitted, 0 received, 100% packet loss, time 3999ms
</pre></div>


<p>加上wait方法:</p>
<div class="highlight"><pre><span></span>[wenwt@localhost syntax]$ python process.py 
PING www.google.com (173.194.219.103) 56(84) bytes of data.

--- www.google.com ping statistics ---
5 packets transmitted, 0 received, 100% packet loss, time 3999ms

parent process
</pre></div>


</li>
</ul>
</li>
</ul></section>
                <a href="http://www.shushilvshe.com/data/python-base.html#disqus_thread"></a>
                <hr class="uk-article-divider">
            </article>


        <article class="uk-article" itemtype="http://schema.org/BlogPosting" itemscope="itemscope" itemprop="blogPost">
                <a href="http://www.shushilvshe.com/data/facealign.html" class="uk-article-title uk-link-muted" itemprop="name">人脸识别——对齐算法</a>
                <p class="uk-article-meta"><time datetime="2017-09-05" itemprop="datePublished">2017-09-05(星期二) 22:24</time> • <a href="http://www.shushilvshe.com/category/data.html">Data</a></p>
</p>
                <p class="uk-article-lead" itemprop="description">使用facenet框架，可以识别出一张图片中的人脸头像，并返回每张人脸的边界和五官坐标，但图片中有的头像是有倾斜角度的，我们将倾斜度数小于指定阈值的进行校正，其余的按原形截取图片。</p>
                <p>基本思路： 使用facenet框架，可以识别出一张图片中的人脸头像，并返回每张人脸的边界和五官坐标，但图片中有的头像是有倾斜角度的，我们将倾斜度数小于指定阈值的进行校正，其余的按原形截取图片。 倾斜度数根据两只眼睛的坐标加以计算； 缩放比为两眼X坐标与两眼之间的距离比值； 将人脸边界大小分别向四个方向扩充对应边的1/4长，也就是两边界长宽扩为1.5倍/缩放比； 截取扩充的区域，然后以鼻子坐标为中心进行旋转（也可以考虑以左眼为中心旋转，但以有效数据的中点进行旋转可降低扩充的面积）； 旋转后鼻子的X、Y坐标为原坐标减左边界和上边界； 旋转后需要根据两眼和鼻子构成的三角形算出旋转后左眼的坐标，用于最后截图中心点的定位（根据余弦定理和勾股定理计算）； 根据两眼的斜率和人脸边界大概可以计算两眼连线之上有效高度，用于确定最后图片上边界（默认认为脸长大于脸宽）； 脸的长度根据人脸边界/斜率得出大概值（偏小）； 总的图片高度根据计算出的脸长和margin值相加得来； 根据左眼坐标和图片高度计算最后截图需要的四个边界值，得到最后需要图，最后进行缩放完成。 算法实现： import facenet import math from PIL import Image def alignFace(self, image, boundingBoxes, positions, cropSize=160, angleThreshold=5): ''' image 原始图像 boundingBoxes 脸部轮廓边框 positions 五官坐标 cropSize：最后保留的图像的大小 angleThreshold: 旋转头像倾斜角度阈值 ''' aligneds=[] if len(<span...</p>
                <a href="http://www.shushilvshe.com/data/facealign.html">Read More</a>
                <hr class="uk-article-divider">
        </article>


        <article class="uk-article" itemtype="http://schema.org/BlogPosting" itemscope="itemscope" itemprop="blogPost">
                <a href="http://www.shushilvshe.com/python/peewee.html" class="uk-article-title uk-link-muted" itemprop="name">peewee 入门教程</a>
                <p class="uk-article-meta"><time datetime="2017-08-31" itemprop="datePublished">2017-08-31(星期四) 20:04</time> • <a href="http://www.shushilvshe.com/category/data.html">Data</a></p>
</p>
                <p class="uk-article-lead" itemprop="description">peewee是一款轻量级、丰富的ORM（Object Relation Mapping，对象关系映射），支持 postgresql、mysql 和 sqlite。</p>
                <p>简介 peewee是一款轻量级、丰富的ORM（Object Relation Mapping，对象关系映射），支持 postgresql、mysql 和 sqlite。 大量的插件支持： Postgresql HStore，Json，Arrays SQLite全文搜索、自定义函数、虚拟表格 结构迁移和model代码生成器 连接池 加密 连表查 单表原生sql接口 模型定义 模型类、字段以及模型实例与数据的对于关系： peewee 数据库 Model class Database table Field instance Column on a table Model instance Row in a database table 开始一个peewee的项目时，通常最好通过定义一个或多个 Model classes: 来开始你的数据模型。 连接数据库 from peewee import * db = SqliteDatabase('people.db') class Person(Model): name = CharField() birthday = DateField() is_relative = BooleanField()...</p>
                <a href="http://www.shushilvshe.com/python/peewee.html">Read More</a>
                <hr class="uk-article-divider">
        </article>


        <article class="uk-article" itemtype="http://schema.org/BlogPosting" itemscope="itemscope" itemprop="blogPost">
                <a href="http://www.shushilvshe.com/travel/kunming.html" class="uk-article-title uk-link-muted" itemprop="name">周末昆明二日游</a>
                <p class="uk-article-meta"><time datetime="2017-08-29" itemprop="datePublished">2017-08-29(星期二) 07:51</time> • <a href="http://www.shushilvshe.com/category/travel.html">travel</a></p>
</p>
                <p class="uk-article-lead" itemprop="description">恰逢全运会，天津又下雨了，又想起来了补游记了。平时工作笔记忙，没有时间出来旅游，老早前和小辜子约好出去玩，本来打算六月份出去的，计划终究赶不上变化，最后定在 2017.05.06 - 2017.05.07 周六日这两天了，地点本来是想找个离小辜子近点的，原本打算去重庆，觉得两天时间重庆不够用，且航班时间上不太合适，思来想去，云南是个不错的选择，由于时间比较短，所以只逛下昆明就够了，两天时间，足以。我出行喜欢定好计划，做好攻略，但小辜子是随性的，走哪算哪，所以，查查有哪些景点，定好酒店，剩下的具体行程到了再定。</p>
                <p>恰逢全运会，天津又下雨了，又想起来了补游记了。平时工作笔记忙，没有时间出来旅游，老早前和小辜子约好出去玩，本来打算六月份出去的，计划终究赶不上变化，最后定在 2017.05.06 - 2017.05.07 周六日这两天了，地点本来是想找个离小辜子近点的，原本打算去重庆，觉得两天时间重庆不够用，且航班时间上不太合适，思来想去，云南是个不错的选择，由于时间比较短，所以只逛下昆明就够了，两天时间，足以。我出行喜欢定好计划，做好攻略，但小辜子是随性的，走哪算哪，所以，查查有哪些景点，定好酒店，剩下的具体行程到了再定。 周五早早收拾好东西，赶赴天津滨海国际机场，云南是我去的最远的地方了，而且七彩云南，风光旖旎，民风淳朴，还是有满满的期待的。 到了机场才换登机牌，依然和前几次一样，最后都只剩下中间的座位，所幸我不是很胖，对靠窗要求不太高，也不常去厕所，所以对中间的座位还阔以接受的。另外，这个航班中间需要经停恩施，到昆明就十二点了，提前定好机场巴士和获取房间密码很有必要。 到现在我还是觉得从去哪儿或携程上订的机场巴士不正规啊，没有自己专属的地点，只有靠机场的标志物去确定他们的工作人员在哪，从机场出来后，就得找到这个麦当劳才能找到他们，个人表示不太喜欢。本来我们俩订的航班差不多都是快一点到昆明，我的稍微晚点，结果在恩施没停多长时间，早到了二十多分钟，小辜子那边反而晚点了，十点多还没起飞，不知道什么时候才能到，我只能先回酒店等着她了。 自从在南京住了一次酒店式的公寓之后，就喜欢上了这种出行住宿方式，设备齐全，有家的感觉，房间大且价格比一般的快捷酒店还要便宜，为啥子不选？ 这次订的是个loft形式的房间，全季优品酒店式公寓，在万达广场昆明双塔对面的H公寓，蛮喜欢的，等电梯的时候留个念吧 办理好入住手续后，进入我的房间后，完全被这种惬意的家居风格深深的吸引了，比南京那次住的要更中意。 还是很不错吧，美美哒，先去洗个澡放松下。 小辜子到昆明市区就快三点了，简单吃了点东西，各自回去休息了，睡到自然醒之后再出去。 可能有点小激动了，一晚上没咋睡好，迷迷糊糊五点多才睡着，到八点多就起来了，洗漱之后本来想先独自出门看看周边的风景，等小辜子睡醒后去吃饭。没想到的是，她竟然醒那么早，我是老年人醒得早也就罢了，看来她这睡眠质量真得提高下了。放置好东西后，在万达附近找吃的填饱肚子了，吃的啥我都忘了，反正不是啥特产。 一般来云南旅游的人，大多数的目的地都是大理、丽江、西双版纳等，昆明确实没什么玩的，不过，再怎么着，昆明还是有几个地方可以去的，像 民族村 云南民族村，占地面积为1264.96亩，其中水域面积463.96亩。集云南主要的傣族、白族、彝族、纳西族、佤族、布朗族、基诺族、拉祜族、藏族、景颇族、哈尼族、德昂族、壮族、苗族、水族、怒族、蒙古族、布依族、独龙族、僳僳族、普米族、满族、回族、瑶族、阿昌族等25个少数民族的村寨、民族歌舞厅、民族广场、云南民族博物馆以及激光喷泉、水幕电影等旅游设施。民族村寨采用复原陈列的手法展示云南的民族风情。走进村里只见不同风格的民族村寨分布其间，错落有致，各展风姿，各少数民族丰富多彩的村舍建筑、生产、生活、宗教习俗均如实地展示出来，是云南民族文化的缩影。 西山森林公园 昆明西山森林公园，位于昆明西郊15公里的峰峦间。主要由华亭寺、太华寺、三清阁、龙门等风景点组成。华亭寺位于海拔2050米的山间，创建于14世纪，寺内殿宇规模宏伟壮观，是昆明著名的佛教圣地。太华寺建于14世纪初，花木繁盛，幽香袭人，寺内的望海楼，是观在滇池日出的好地方。三清阁和龙门是一组构建在西山主峰罗汉山悬崖峭壁上的建筑群，有九层十一阁。龙门石雕工程，包括石道、古室、古栏、古窟、古佛等，是西山胜境的精华所在。登上龙门，凭栏下视，为百丈之悬崖峭壁；举目远望，海天一色，五百里滇池尽收眼底。这是一个峰峦起伏、林木苍翠、白鸟争鸣、景色秀丽的森林公园。茂密的森林植被，常年郁郁葱葱，华亭寺、太华寺、三清阁等古刹殿宇楼阁掩映于茂林修竹深处。西山唐代称为碧鸡山；元明以来，称太华山；因其在城西，群众习惯称它为西山。 另外还有 海埂公园 、 滇池、 云南大学、金鸡碧马坊、云南陆军讲武堂旧址、金殿风景名胜区、云南野生动物园、官渡古镇 等等，其实也不少了，周边还有著名的 石林 和 九乡 两天时间也转不完昆明。 民族村不是很远，就打车先去民族村吧。昆明的天真是哪哪儿都好啊，羡慕ing。从这个牌坊进去之后是一条商业街，要走一会才能看到卖票的。 昆明的天气温度比较合适，但这紫外线实在太强了，晒的慌。。。进村儿之后看到游客不是很多，走到民族团结广场，村里的姑娘例行表演，傻傻分不清这是哪族的。 看了一会儿，继续往村子深处走，好多民族，我感觉就跟刘姥姥一样了，来一张导游图吧。 从右侧的正大门进去，一直往西走，最终还是不知道哪是哪，索性就这么走吧，走哪算哪， 里面有好几处建筑，都是建在木桩之上，可能因为这边地面潮湿？走进一家房子，建的很精巧，好几代同堂的是大公房，而且还有室外露天大阳台，这要搁帝都，只有超级别墅才有这配置，来看看这个菇凉是哪族的 ?? 穿过一个石阶小桥，隐隐约约听见人们欢快的声音和竹竿撞击的声音，顿时来了兴趣，闻声赶去，一屋子的人生着篝火，跳着“竹竿舞”， 大家自己找亮点。 我上前跳了一轮，很不好意思的踩了两回竹竿，再无颜面称霸舞蹈界了。。。村里路程较远，出门之后租了一辆双人的脚踏车，顺着车能走的地方，狠劲蹬起来。。。没走多远，听到有??的声音还有解说员在调动现场气氛，锁好车子之后，我们在看台的小角落找了个地方坐下，静静的观赏了。中途有小象作画，有大象踢球射门等表演，挺精彩，不过这象有这么大吗？两米多高，少见过怪了。 大象表演完了之后就出门继续前行了，沿途看到有大理白族三塔，很是出名。虽说民族村的三塔是复制品，但湖中三塔的独具匠心，还是别有一番景致的。 大理崇圣寺三塔属全国重点文物保护单位，5A级景点，位于原“崇圣寺”正前方，呈三足鼎立之势，是南诏国和大理国时期的一组颇具规模的佛教寺庙建筑。大塔先建，南北小塔后建，可惜壮观庙宇在咸同年间已毁，只有三塔完好地保留了下来，才有了现在的全国重点文物。 小辜子昨晚没休息好，走了一会已经不想动了，于是就把车停靠在一座浮桥的旁边休息下，我转一圈再出来。路上有一些叫不上名字的民族风俗建筑 <img src="/images/travel-kunming/IMG20170506122335.jpg" width="600"...</p>
                <a href="http://www.shushilvshe.com/travel/kunming.html">Read More</a>
                <hr class="uk-article-divider">
        </article>


        <article class="uk-article" itemtype="http://schema.org/BlogPosting" itemscope="itemscope" itemprop="blogPost">
                <a href="http://www.shushilvshe.com/ge-ren-bo-ke-da-jian-guo-cheng-pelicangithub.html" class="uk-article-title uk-link-muted" itemprop="name">个人博客搭建过程(Pelican+Github)</a>
                <p class="uk-article-meta"><time datetime="2017-08-12" itemprop="datePublished">2017-08-12(星期六) 18:44</time> • <a href="http://www.shushilvshe.com/category/data.html">data</a></p>
</p>
                <p class="uk-article-lead" itemprop="description">当初整vps完全只是为了科学上网，但感觉一个服务器只运行一个vps服务有点太浪费了，为了让其发挥最大价值，于是就想在上面搭个博客，搞个备份，SVN啥的。所以就先尝试的搭个个人博客系统。一直都想拥有一个只属于自己的博客系统，记录一下生活工作的点点滴滴。尝试过网易、csdh等平台的博客，虽然方便点，但一直没能坚持下来，总觉得不是自己的地盘，一成不变的界面不是我想要的；也尝试过著名的PHP博客系统wordpress,但其对markdown语法支持不太好，再一个比较重要的原因就是我买的vps是最小版的，只有512M内存，养不起这只大猫。。。。。。</p>
                <p>前言 当初整vps完全只是为了科学上网，但感觉一个服务器只运行一个vps服务有点太浪费了，为了让其发挥最大价值，于是就想在上面搭个博客，搞个备份，SVN啥的。所以就先尝试的搭个个人博客系统。一直都想拥有一个只属于自己的博客系统，记录一下生活工作的点点滴滴。尝试过网易、csdh等平台的博客，虽然方便点，但一直没能坚持下来，总觉得不是自己的地盘，一成不变的界面不是我想要的；也尝试过著名的PHP博客系统wordpress,但其对markdown语法支持不太好，再一个比较重要的原因就是我买的vps是最小版的，只有512M内存，养不起这只大猫，有一次只是加了一个图片管理的插件，导致内存爆满，正常的VPS服务都无法使用了，遂只能移情别恋了；告别了动态语言博客系统，一个简洁带有原始风味的静态博客系统进入我的视野——hexo，不过不太喜欢hexo的这种组织风格（PS：也许是我还没研究透彻），最终，我将目光锁定在基于python语言的Pelican博客系统上，原因如下： 对Markdown语法支持比较好，方便编程习惯写博客 正在用python研究ML，python版的博客系统正合适 易安装，主题、插件丰富，文档比较完善，社区比较活跃 页面可托管到github上，有版本管理，且可写个脚本一键生成静态页面并部署，简单快捷 网站组织结构可根据自己组要自定义，自由度高 Pelican是一个用Python语言编写的静态网站生成器，支持使用 restructuredText 和 Markdown 写文章，配置灵活，扩展性强，有许多优秀的主题和插件可供使用。Pelican 的Github地址是：https://github.com/getpelican/pelican;pelican官网：http://blog.getpelican.com/;pelican文档：http://docs.getpelican.com/en/stable/ 所需工具一览 MarkdownPad2（md工具） Pelican（基于Python语言的静态博客框架） Github(静态网页托管) Namesilo(https://www.namesilo.com/) 域名（优惠码） BandwagonHost(搬瓦工——VPS) https://bandwagonhost.com/ （【购买页面（需翻墙）】 【国内】） SecureCRT（ssh工具） shell脚本 我现在的整个操作流程是酱紫滴： 在本地用markdown写博客，之后把md文件同步到云服务器上，在服务器上生成静态页面并提交到github上完成部署，这样有个好处就是可以在家写生活，在公司写工作，两个地方写完之后提交到同一个生成部署环境中即可，不用都部署pelican环境了，适用于经常变换电脑的宝宝们。当然如果用的电脑只有一个的话，完全可以把生成部署环境搭建到本地，本地编辑完，生成再部署即可，这样更简单。 1.准备VPS（或云服务器）(可选) 打开 搬瓦工的购买页面（需翻墙） 国内可从 搬瓦工 购买， 也比较靠谱（我的优惠码是从这儿搞的） 选择最低配的年付 $19.99 的电信联通直连的套餐即可，速度还阔以，有一点不太好就是只有一个DC，不能切换机房 可以从 国内搬瓦工 获取优惠码，有5%的折扣 国内可以选择支付宝付款 开通完毕一般是即时生效的，这时候我们就可以打开网站的管理界面了KiwiVM, 第一步，选择一下自己喜欢的系统重装一下,左侧列表 Install New OS（PS： 由于VPS只能装到centos 6的系统上，所以，没得选） 第二步，安装 VPS 服务 ，左侧列表 Shadowsocks Server 还差最后一步就阔以科学上网了，按如下步骤在本地下载一个shadowsocks，按照图片所示内容填写即可，支持多客户端同时科学上网，棒棒哒✌ 2.github pages绑定独立域名（可选） 拥有一个属于自己的域名感觉逼格很高，无所谓的可以跳过，直接用github的二级域名即可 购买域名 我选用的是namesilo域名服务商，选择namesilo的原因很简单： Namesilo商家的优势在于域名价格比较稳定，其次就是赠送隐私保护。这域名隐私保护还是比较重要的，可以防止个人信息被恶意邮件或者泄露身份. 打开网址 https://www.namesilo.com/ 注册后输入自己想要的域名 点击查询后会显示不同域名后缀价格,选择一个购买就行。 域名管理界面 绑定域名 （注册github帐号以及添加仓库等操作略。。。） 在仓库的配置页面找到 GitHub Pages 配置项，在 Custom domain 中填入刚才注册的域名，点击保存即可。 这时候，会在仓库根目录下生成一个CNAME文件，接下来还需要做的就是去刚Namesilo中配置下ip和域名的映射记录即可。在Namesilo的域名管理界面，找到Github的配置模版 点击 Apply Template , 然后点击 Accecpt， 配置好对应 github页面的地址即可，...</p>
                <a href="http://www.shushilvshe.com/ge-ren-bo-ke-da-jian-guo-cheng-pelicangithub.html">Read More</a>
                <hr class="uk-article-divider">
        </article>


        <article class="uk-article" itemtype="http://schema.org/BlogPosting" itemscope="itemscope" itemprop="blogPost">
                <a href="http://www.shushilvshe.com/travel/beijingshidu.html" class="uk-article-title uk-link-muted" itemprop="name">逼格data社团十渡自驾游</a>
                <p class="uk-article-meta"><time datetime="2017-08-11" itemprop="datePublished">2017-08-11(星期五) 07:23</time> • <a href="http://www.shushilvshe.com/category/travel.html">travel</a></p>
</p>
                <p class="uk-article-lead" itemprop="description">自我们大数据组在老大帅锅欣哥的带领下，已然过了半载，虽不说大有成就，但也尽心尽力的为公司的发展贡献自己的热情。回想起这半年的日日夜夜，我们几个组员成长很快，整个团队凝聚力很强，学习氛围很浓，每个人都有自己的特长，行成了良性的生态循环。当然，能在这样的团队中，万分荣幸，感谢各位兄弟。</p>
                <p>自我们大数据组在老大帅锅欣哥的带领下，已然过了半载，虽不说大有成就，但也尽心尽力的为公司的发展贡献自己的热情。回想起这半年的日日夜夜，我们几个组员成长很快，整个团队凝聚力很强，学习氛围很强，每个人都有自己的特长，行成了良性的生态循环。当然，能在这样的团队中，万分荣幸，感谢各位兄弟。 期间，我们也忙里偷闲， 约饭、看电影、出游也构成了我们猿人单调生活中的点点色彩。当然，兄弟们在一起奋战的快乐日子用语言是无法诉说出来的，能记下来的，或许一整段的故事会更加能使得回忆更加真实丰富些，自然，四月份的十渡自驾游是最好不过的题材了。 三月份我们大数据组成立之始，就本着以能打硬仗，打胜仗为目标，前期需要搭建能承载数据分析的基本存储架构，因为组员在大数据方面基本都是rookie，为了能打下比较好的基础，也为练兵，大家经常披星戴月的奋战在一线，争取早日出关。当然，欣哥不光要考虑技术选型和未来战略走向的问题，还考虑到兄弟们的工作张弛的问题，所以，就有了周六日自驾游的计划（欣哥自费，感动ing。。。），那么，选址和具体计划，就交给了比较爱出门瞎溜达的me。 当然，两天的时间的话需要在天津周边找了， 最好是有山，有水，能烧烤，能爬山，还有娱乐项目，路程还不要太远，花费还不会太高。本着这个原则，同时征求了组内意见之后，最终锁定了北京十渡（不远处还有个野三坡也不错）。那边的住宿基本都是农家乐，这个吃住不是问题了，再了还有个怎么玩的问题，既然他们都是本地人，推荐玩儿还不是跟玩一样，所以联系好农家乐之后，基本上计划就已经定好了，周五收拾行装，周六早9点公司集合（上班上习惯了，玩也要凑上班点儿， (^o^)/） 。大概行程如下： 4月21日早九点出发，中午农家乐吃饭，下午去划竹筏爬山，晚上撸串 4月22日早饭过后踏上归程，路上找地放会风筝，下午到天津 周六如期而至，激动的心情难以言表，一个个行装里面透着难以捉摸滴?。欣哥老司机，光神块儿大，副驾是标配，我们三个相对瘦小点的就做后面，系好安全带之后，打开导航就出发喽。一路上还算比较畅通，听着小曲哼着歌，打起鼓来敲起锣，推着小车去送货（很老的曲子，没听过吧）。如下是大概路线，应该是走的路线二。 大约三个多小时的车程，快一点的时候，到达了最终目的地，树叶农家院，抬头仰望周边的山，好清爽. 当然，这个时候的重点不是看山，到饭点了，饿死宝宝们了，快到之前已经跟农家乐的师傅们说了，提前做上饭了。不多时，菜已上桌，拿酒来，喝他个不醉不归（喝多了还怎么去玩，乖乖），不多，一人两瓶 菜的量还是阔以的，不够了还可以再做，其中我只喜欢香椿炒鸡蛋，大快朵颐的吃了两盘，当然不是我一个人吃滴，别的菜也都是家常菜，味道还可以，最主要的是量大，管饱（就是这么好养活??）。 吃饭的时候看到地上一只超级大的虫纸，原谅我这农村长大的娃叫不上这??的学名吧，乳名也不知道，爱称、昵称，都不知道，谁来普及一下？ 俗话说饱暖思淫欲，酒足饭饱之后，像我等之人，自然思的是玩的欲望，还有吃的欲望，但事情需要一件一件做，吃完先活动活动筋骨，然后再吃上个饕餮大餐，美美的再睡上一觉，何其美满的人间一天。真是人高兴了，帝王庶民一个样，傻乐吧。跟乐主（农家乐的主人，该咋称呼？）了解了下周边玩的，最后决定先去玩玩竹筏，然后去爬山，晚上回来撸串（乐主帮我们准备材料，回来直接烤就行，那有架子和碳）， 和乐主商量好价钱之后，乐主送我们到十渡的游乐场，然后就直奔竹筏去了。 有没有小桥流水人家的韵味，人家就是这么帅 换上行头（只不过是个样子，水也就1米深吧，看见几个掉到水里的，激动的很啊），摆个pose，光神不见了，光一般的速度，神龙见首不见尾啊！ 好了，光神回来了，补上靓照，一种敬意油然而生，有光神坐镇，任由风吹雨打，我自岿然不动。 这个鲜明对比啊，小聪聪，发言两句吧。 该我们大帅锅欣哥登场了，这才是我们80后亘古不变的姿势，来一个剪刀手让他们90后瞅瞅，什么是誓言，什么是海枯石烂? 这集校长、哥哥诸多头衔于一身的山西晋哥哥，正发挥自己的聪明才智，俩人怒甩我们三人一条街，我们3??人只能望其项背，谁叫你们都那么生猛，年轻银儿。 谁都别出声，让我们一起安静的钓会鱼吧，姜太公是在下，在下就是姜太公 小聪聪独特的眼神，我要是个女生坐对面会怎样？不敢想象 我在干嘛？我是摄影师啊，当然在晒太阳，背倚青山，环抱绿水，轻乘竹筏，泛舟自然之间，如此美好的场景，让我忍不住当家里了。脱鞋致敬，麻溜滴，看着这双陪我东奔西走，走过祖国大好河山的??，满满的爱惜之情啊， 你歇会，我也歇会（我是划竹筏累了才休息的啊，觉得我偷懒的银儿，自己上思过崖吧，再见） 水好凉 波光凌凌的水面 玩了差不多两个小时了，真是个体力活啊，休息了一会后，转战爬山吧，又一项平凡但又充满乐趣的运动，从竹筏场出来，路过CS场地，晋哥哥忍不住的非要和美女和个影（其实晋哥哥是想握人家的手来着，允许我造谣一次吧??） 沿着公路一直往下走，寻思着哪座山可以爬，走着走着看到一个乐佛山，是山就行。门票60，团购40，看看这爬山的人很少啊，估计香火很少。买票进门，过一座浮桥就到了山脚下的水泥路上，路两边有好多佛像雕塑，还有一些写满梵文的经文，对我们凡人来说，就是一道风景吧。 我对这尊开心罗汉甚感兴趣，远远看着那突起的肚子就开心不已，一时兴起就想跳起来摸一下肚子，三步并作两步，跑起来，跳，360腾空旋转，摸肚子，然后就稳稳的坐在了地上，疼。不走寻常路的人，终归有不寻常的结果，开心罗汉，你让我明白，开心，也是要付出代价的，即使痛，但也快乐着。。。 走了差不多不到两公里，终于到检票口了，一个牌坊，一个简易的检票小亭子，如此而已，票也没有，就是跟超市小票一样的纸条儿。。。无力吐槽。那就开始爬吧。 爬了两步，回头瞅瞅这台阶还阔以，不算陡，欣哥，加油啊。 最欢实的还属光神了，撒丫子就跑，在石头上东奔西跳，这雄壮的身材配合这矫健的身影，自己脑补去吧。来个胜利者的纪念照吧。 我就是要竖中指，谁都别拦我。这姿势，顿时无数明星身影，倩影，魅影在我脑海中闪现，只差灯光了。 这哥俩，平时这么爱运动，今天咋滴了。。。 这水流让我拍的，如果有个单反的话，能拍出水流飘渺的感觉。 还有野花花，说不采就不采 瞅瞅能发现什么，天然的伪装啊。 由黑暗之光领队，不一会就都爬到头了，半山腰就已经是断头路了，没路可走就原路返回了，到快到山脚下的时候，有个岔口，过去之后是个寺庙，附近是一些佛像之类的。不过和之前看到的光景预测的一样，不能说香火旺不旺盛的问题了，这大门紧锁，台阶压根都不像经常有人来过的样子，反而石头台阶还断了好多根，一看就是豆腐渣工程啊，不知道谁想搞政绩，整了这么个玩意出来。原谅我对佛祖的不敬吧，对事不对佛啊。阿弥陀佛 阿弥陀佛 阿弥陀佛 空旷的大广场，干点啥好呢，晋哥哥的摄影欲望大发，我勉强当个模特吧，很勉强，配合不出晋哥哥要求的魂儿飞的效果，算了，这姿势就当乐子吧。 晋哥哥的作品——《春意浓》， 游乐佛寺有感。。。 下山了，回去烤串喽，穿过去时的浮桥，光神什么时候都倍儿精神，满满的鸡血味儿。 最后留个念。 <img...</p>
                <a href="http://www.shushilvshe.com/travel/beijingshidu.html">Read More</a>
                <hr class="uk-article-divider">
        </article>


        <article class="uk-article" itemtype="http://schema.org/BlogPosting" itemscope="itemscope" itemprop="blogPost">
                <a href="http://www.shushilvshe.com/images/food/yingtaoguantou.html" class="uk-article-title uk-link-muted" itemprop="name">樱桃罐头制作方法</a>
                <p class="uk-article-meta"><time datetime="2017-08-08" itemprop="datePublished">2017-08-08(星期二) 21:46</time> • <a href="http://www.shushilvshe.com/category/food.html">food</a></p>
</p>
                <p class="uk-article-lead" itemprop="description">端午节从沪苏杭回来的最大收获就是认识了一个大宝宝——小百仙儿，至于为啥子叫小百仙呢，因为她会“掐指一算”，至于算出来啥呢，只有她知道。 六月份正值烟台大樱桃收获的季节，贴心的宝宝满足了作为一个初级吃货的愿望，给我寄来一大箱的大美早。盼星星盼月亮，比盼媳妇儿还要着急，>-<,终于盼到了快递小哥的电话，收到后没敢拆箱，生怕拆箱后整坏喽。晚上下班把箱子放摩拜前面的框子里，一手扶着车把，一手扶着箱子，我滴宝贝啊。。。</p>
                <p>端午节从沪苏杭回来的最大收获就是认识了一个大宝宝——小百仙儿，至于为啥子叫小百仙呢，因为她会“掐指一算”，至于算出来啥呢，只有她知道。 六月份正值烟台大樱桃收获的季节，贴心的宝宝满足了作为一个初级吃货的愿望，给我寄来一大箱的大美早。盼星星盼月亮，比盼媳妇儿还要着急，>-<,终于盼到了快递小哥的电话，收到后没敢拆箱，生怕拆箱后整坏喽。晚上下班把箱子放摩拜前面的框子里，一手扶着车把，一手扶着箱子，我滴宝贝啊。。。 到家就迫不及待的拆箱了，憋了一天了。 一共六层，每一颗美早都很饱满，外衣，统统都拔掉，拔掉，哈哈哈 随手抓了一把，成色很不错啊，宝宝说会有一些坏的，大概看了一遍，没几个，人品还不错。 抓了两大把，趁新鲜刚出炉，一次先吃个够。。。 但吃完之后面临的问题是， 剩下的这些宝贝儿可咋整啊，五斤多的🍒， 怎么合理的分配呢？ 好东西当然不能独享，把樱桃分成两部分，一部分明天带给同事，让宝宝的福祉授惠于我身边的银儿吧。 但即使这样，剩下的我还是吃不完，且不说樱桃不耐放，周六日我还要去西安，所以呢，留下这两天吃的，按照宝宝的指示，做成樱桃罐头就阔以了，正好等从西安回来的时候吃。 那么，师傅领进门，做樱桃罐头就得靠个人了。 怎么做呢，罗哩罗嗦终于到正题了，其实捏，还能再简单一点吗？真的太简单了。。。 步骤 1. 将坏的樱桃挑出去，留下饱满的健康滴青壮年，一定要注意哦！否则，一颗XXX，会坏了XXX的，切记！！！ 2. （可选）用筷子将樱桃核从中间捅出去，只留下果肉。 我没时间弄，也懒得弄，直接放整个果实，事实证明， 我还是比较喜欢这样，吃的时候有核，增加下吃的乐趣，就和嗑瓜子一样，直接给你一把瓜子仁，没啥劲，这个看自己； 3. 都整理好之后，锅洗干净，盛上清水，水量要充足，最起码要没过樱桃才行。 打开火，在水中放入适量冰糖，喜欢甜就多放点，反正我放的不少，之后吃的是透心凉啊！！！ 4. 水开且冰糖完全溶解了之后，就放入樱桃了。。。 5. 沸水煮个三五分钟之后，关火，阴凉地冷却，然后入瓶吧。。。 6. 等完全冷却后，盖好盖子，放入冰箱， 大功告成。哈哈，西安旅游回来就可以大吃特吃了！！！...</p>
                <a href="http://www.shushilvshe.com/images/food/yingtaoguantou.html">Read More</a>
                <hr class="uk-article-divider">
        </article>


        <article class="uk-article" itemtype="http://schema.org/BlogPosting" itemscope="itemscope" itemprop="blogPost">
                <a href="http://www.shushilvshe.com/ml/pandas/baseoperation.html" class="uk-article-title uk-link-muted" itemprop="name">pandas基本操作</a>
                <p class="uk-article-meta"><time datetime="2017-08-08" itemprop="datePublished">2017-08-08(星期二) 17:17</time> • <a href="http://www.shushilvshe.com/category/data.html">Data</a></p>
</p>
                <p class="uk-article-lead" itemprop="description">在pandas中有两类非常重要的数据结构，即序列Series和数据框DataFrame。Series类似于numpy中的一维数组，除了通吃一维数组可用的函数或方法，而且其可通过索引标签的方式获取数据，还具有索引的自动对齐功能；DataFrame类似于numpy中的二维数组，同样可以通用numpy数组的函数和方法，而且还具有其他灵活应用，后续会介绍到。</p>
                <p>1.数据结构介绍 在pandas中有两类非常重要的数据结构，即序列Series和数据框DataFrame。Series类似于numpy中的一维数组，除了通吃一维数组可用的函数或方法，而且其可通过索引标签的方式获取数据，还具有索引的自动对齐功能；DataFrame类似于numpy中的二维数组，同样可以通用numpy数组的函数和方法，而且还具有其他灵活应用，后续会介绍到。 Series的创建 序列的创建主要有三种方式： 1、通过一维数组创建序列 import numpy as np, pandas as pd arr1 = np.arange(10) print(arr1) print(type(arr1)) s1 = pd.Series(arr1) print(s1) print(type(s1)) 显示： [0 1 2 3 4 5 6 7 8 9] <class 'numpy.ndarray'> 0 <span...</p>
                <a href="http://www.shushilvshe.com/ml/pandas/baseoperation.html">Read More</a>
                <hr class="uk-article-divider">
        </article>


        <article class="uk-article" itemtype="http://schema.org/BlogPosting" itemscope="itemscope" itemprop="blogPost">
                <a href="http://www.shushilvshe.com/travel/luoyang.html" class="uk-article-title uk-link-muted" itemprop="name">登封洛阳游记——洛阳篇</a>
                <p class="uk-article-meta"><time datetime="2017-08-05" itemprop="datePublished">2017-08-05(星期六) 08:12</time> • <a href="http://www.shushilvshe.com/category/travel.html">travel</a></p>
</p>
                <p class="uk-article-lead" itemprop="description">一晃快四个月过去了，期间发生了好多事，写游记的事情也就都搁置了，这周末清闲下来了，博客系统也移植成功了,那么，还等什么，我们开始洛阳之旅吧。（登封篇）</p>
                <p>一晃快四个月过去了，期间发生了好多事，写游记的事情也就都搁置了，这周末清闲下来了，博客系统也移植成功了,那么，还等什么，我们开始洛阳之旅吧。（登封篇） 让时光定格在17年4月15日下午5五点，阳光明媚，少室山下也蛮凉爽，四月的天，旅游还是最合适不过的了，回望一眼少林寺的武僧雕像（虽然旅程没见到过一个僧人，可能他们也过周末？） 我大步的走向门口找寻开往洛阳的客车。原本按最初的计划，从少林寺出来，还是要回登封市的汽车站去乘坐到洛阳的客车的，但这样时间根本不够，一点多从新郑机场赶到登封，两点多开始从后山爬，五点从少林寺出来,（时间紧，任务重，所以我爬的比较快，如果要拿我的行程做参考的话，在运算完小学减法后，请默默的乘以2来作为正常爬山时间^-^， PS：另外年龄大的注意保护自己的膝盖）而最晚到洛阳的车貌似是六点多的，加之对登封路况不熟悉，一个小时左右的时间还真的玄乎，不过好在打车的老师傅已经帮我规划好了行程，从少林寺正门出来后，门口就有好多停着往洛阳的车，包括汽车站的客车和私家车，汽车站的客车一般是客满才走，私家车看情况，有钱包车也行，拼车也可。 我只要今晚能到洛阳就好，不在乎几点到，所以，当然选客车了，还便宜，20元一张。 到洛阳的客车是那种中巴，大概能容纳三十多人。一上车，首先看到的是司机（别打我），第二眼看到的是一个皮肤黑黑的外国友人，虽说少林寺是很出名，但在这能见到，还是小小的意外了一下。 第三眼看到的是谁不重要了，最重要的是找到空座位才是王道，这仨小时把我赶的累的要死，带上山的三瓶水也都让我转化完了，目测靠窗的一个中间位置还空着，我有点诧异，这么好的位置没人坐？ 三步并作两步，放好东西，准备入座啦。 就在我侧身准备进去的时候，我瞅着过道侧的这年轻人很眼熟，这不就是下山坐缆车坐在我旁边的那个嘛。放好东西后，我们俩就聊了起来，原来我们四点下山后，他为了赶时间就直奔门口等车了，结果等到五点多，这是有多苦逼。不过好在这个大哥有七天假期，有的是时间等，不过这也从侧面说明了如果时间不是那么充裕又想有一个比较愉快的旅游体验的话，多做做攻略，多问问有经验的人，是很重要滴！！！ 一路上还是比较顺利滴，和这位憨厚的大哥聊了一路，临近洛阳了，我们还得订房间，我图经济实惠和去牡丹园方便，在汽车站附近找了一家（去了才知道那边真的太多了，不过条件是差了些），大哥犹豫了半天，觉得条件有点差，哈哈，不过最后还是在我订的那个小宾馆也订了一间。随着车子在汽车站慢慢停下来，我们也收拾好东西准备下车了。夜幕降临，古都洛邑在黑夜的装饰下，迷惑着我的感官。还没分清东南西北呢，这时候看到同车的外国友人慢慢向我走来，试探性的问了我一句 "do you speak English?", "a little" 对待外国友人，我依然保持中华民族不骄不躁谦虚敬慎的优良作风。 然后呢， 省略blablabla...一堆，大概情景是酱紫滴：Gemma（她的名字）从西安过来玩，今天晚上务必要回西安，但要从洛阳龙门高铁站乘车，但不知道怎么走。 嗯，就是简单的问路的场景， 顿时，我从大脑皮层中开始搜寻有关问路课本是如何对答的， go straight，then go across the road, then go left, then go right, biiiiiinggo, 迷路了，汗！！！ 显然对我这个刚到洛阳的人来说，这显然不是一个简单指路问题了。 不过看Gemma比较焦急的样子，我安慰她说一定帮她找到到龙门高铁站的车。 想想也简单，不就是打开百度地图搜索个路线嘛， 分分钟搞定，7路车，打开GPS， come on, Gemma, follow me, this way. 路上走的过程中，了解到Gemma是加拿大人，来西安做外教，简单了解后给她留了一个我的电话，以防今天有什么情况可以再给我打电话。 跟着百度地图走到指定站牌，突然间懵逼了，这又是要秒秒钟打脸了，还是在国际友人的面前，哪有这路车啊，唉，顿时被百度地图坑过的千八百经历又一股脑冒出来了，这意味着——免费，着实是看运气。为了节省时间，最终决定还是打车去车站，和的哥司机说明情况后，Gemma乘车赶赴龙门站。 处理完Gemma的问题，我还得找我的住宿地址，不管怎样，还是得借助百度地图，最终在一个小深巷子里找到了，临近汽车站，但也能图个清静，不错哒。 正巧碰见同车的那个大哥在前台，原来是订的那个大床房没有了，只有双人的，不太愿意住，最终去找别的住宿地儿了，告别之后，到了自己的房间，80元一天的房间，有两张单人床， 看着挺白，闻着有股味。。。。 卫生间在外面，还有洗澡，都是公用的，也没有毛巾洗发液之类的，全都得自己准备。。。 整个宾馆是自家的房子盖起来的，房东人还是比较热情的，一个人还是阔以凑合一晚上的。 啦啦啦，饿死了，忙了半天还没有吃饭，出门简单吃了个面， 七块钱，一大碗西红柿打卤面，够实惠，吃完回去洗了澡，然后就准备去欣赏下洛阳的夜景。 本来洛阳的朋友打算晚上过来，结果临时有事，第二天早上才能过来，遂给我推荐了一个洛阳刚开的一个文峰塔景区，是洛阳的古景区，夜景还不错。洗完澡就带伞出门了（报的有雨），从地图上搜文峰塔景区，结果搜不到，可能是比较新的缘故？ 然后就搜了个带文峰两个字的地址，想来不会差太远吧。出门已经开始丢星（邯郸话，下很小的雨）了，想想下的又不大，总共也就6公里的路程，最后决定骑摩拜过去（有共享单车的城市我就倍感亲切，不得不吐槽下苏州，竟然以影响城市形象为名，严拒共享单车。我想不明白为什么不注重提供人群素质，反而无视社会发展，一个真正的开放创新包容，GDP都比省会高的城市，何以至此）。 来一张洛阳地图： 现在的城市繁荣地带不像以往那样以火车站和汽车站为中心了， 更多的像是在交通便利的地点，城市的中心。一路走一路看（注意安全哦），感受安静的古都在点点星光下散发出历史气息，绵绵而悠长。 听着度娘的指挥，走入了老城区，繁花似锦，热闹非凡，洛阳现代化的另一面，看到一条护城河和一面城墙 想来这就是景区了？ 还没闹明白呢，这雨就开始下的有点急， 眼看快要到了，不甘心啊，继续往前骑，但到了搜索的指定地点后，一个小巷子，依然没看到有景区的踪影，那只能回归最原始的方式，问路人，可这雨下的越来越大，行人都加快了步伐，归心似箭，问了一个小卖铺的老板，结果爱搭不理的甩了句“不知道”，早知道应该问老板娘<-<, 最后一个清洁工老大爷热情的给我指路，无奈还是有点距离，景区马上就要关门了，加之雨下的太大，于是就乘坐公交车往回走了。 和衣睡了一夜，没有睡踏实，第二天早上早早起来洗漱完毕，就等朋友过来，定好时间地点后，找了个地方吃了顿早餐——豆腐汤，洛阳传统的早点 看着挺不错吧，吃着更好吃，洛阳的各种汤能让你一个星期不重样，这洛阳的美食也是一个意外收获了。汤足饼饱之后，我们就开始了旅程的第一站——中国国花园. 洛阳的牡丹园甚多: 神州牡丹园 西苑公园 洛阳国花园 王城公园...</p>
                <a href="http://www.shushilvshe.com/travel/luoyang.html">Read More</a>
                <hr class="uk-article-divider">
        </article>


        <article class="uk-article" itemtype="http://schema.org/BlogPosting" itemscope="itemscope" itemprop="blogPost">
                <a href="http://www.shushilvshe.com/ml/dt.html" class="uk-article-title uk-link-muted" itemprop="name">决策树原理</a>
                <p class="uk-article-meta"><time datetime="2017-07-28" itemprop="datePublished">2017-07-28(星期五) 14:03</time> • <a href="http://www.shushilvshe.com/category/data.html">Data</a></p>
</p>
                <p class="uk-article-lead" itemprop="description">决策树就是做出一个树状决策,就像猜猜看(Twenty Questions)的游戏。一个玩家(先知)选择一种常见物品, 但是事先不能透露给其他玩家(提问者)。提问者最多问20个问题,而先知只能回答: 是, 否, 可能三种答案。提问者的提问会根据先知的回答越来越具体, 多个问题问完后, 提问者的决策就形成了一颗决策树。决策树的分支由可以猜出响应变量值的最短的解释变量序列构成。因此, 在猜猜看游戏中,提问者和先知对训练集的解释变量和响应变量都很了解, 但是只有先知知道测试集的响应变量值。</p>
                <p>决策树简介 决策树就是做出一个树状决策,就像猜猜看(Twenty Questions)的游戏。一个玩家(先知)选择一种常见物品, 但是事先不能透露给其他玩家(提问者)。提问者最多问20个问题,而先知只能回答: 是, 否, 可能三种答案。提问者的提问会根据先知的回答越来越具体, 多个问题问完后, 提问者的决策就形成了一颗决策树。决策树的分支由可以猜出响应变量值的最短的解释变量序列构成。因此, 在猜猜看游戏中,提问者和先知对训练集的解释变量和响应变量都很了解, 但是只有先知知道测试集的响应变量值。 决策树通常是重复的将训练集解释变量分割成子集的过程, 如下图所示。决策树的节点用方块表示, 用来测试解释变量。每个节点向下的边表示不同决策产生结果。训练集的样本由决策结果分成不同的子集。例如, 一个节点测试解释变量的值是否超过的限定值。如果没有超过, 则进入该节点的右侧子节点; 如果超过, 则进入左侧子节点。子节点的运行原理和前面的一样, 直到终止条件(stopping criterion)满足才停止。在分类任务中, 包含在叶子节点中的样本响应变量的值的平均值作为响应变量的估计值。决策树建立之后, 做决策的过程就是把测试样本放进决策树沿着边不断前进, 直到一个叶子被触及才停止前进。 训练决策树 我们用Ross Quinlan发明的ID3(Iterative Dichotomiser 3,迭代二叉树3代)算法创建决策树, ID3是最早用于决策树的算法之一。假设你有一些猫和狗的分类数据。但是不允许直接观察, 你只能通过动物特征的描述去做决策。对每个动物, 你都会获得关于“是否喜欢玩球(play fetch)”和“是否经常发脾气”, 以及它最喜欢的食物三个问题的答案。 要正确分出新动物的种类, 决策树需要对每条边的解释变量进行检查。每条边的下一个节点由测试结果决定。例如, 第一关节点可能问“是否喜欢玩球”, 如果回答“YES”, 则进入左节点, 否则, 如果回答“NO”, 则进入右节点。以此类推, 最后一条边会指向一个叶子节点, 那就是答案。下表是14个节点的训练数据: 从数据中我们发现, 猫比狗更容易发脾气。大多数狗玩球, 而猫不爱玩。狗更喜欢狗粮和培根, 而猫喜欢猫粮和培根。解释变量是否喜欢玩球和是否经常发脾气可以转换成二元特征值。解释变量最喜欢的食物可以转换成一个具有三个可能值的分类变量, 可以用onehot编码[1,0,0], [0,1,0], [0,0,1]表示, 具体方法在第三章已经介绍过。通过上面的分析, 我们可以构建模型的规则。例如,一个动物如果经常发脾气且喜欢吃猫粮那就是猫, 如果喜欢玩球且爱吃培根就是狗。在这么小的训练集里, 想手工逐条构建规则也是非常麻烦的事情。因此, 下面我们来构建决策树。 熵 和猜猜看一样,决策树也是通过对解释变量序列的逐条测试获取响应变量结果的。那么,哪个解释变量应该先测试?直觉观察会发现,解释变量集合包含所有猫或者所有狗的测试,比既包含猫又包含狗的解释变量集合的测试要好。如果子集成员种类不同,我们还是不能确定种类。我们还需要避免创建那种测试,把单独的一只猫或一条狗分离出去,这种做法类似于猜猜看问题中前几轮就问非常具体的问题。更一般的情形是,这些测试极少可以分出一个样本的种类,也不能降低分类不确定性。能够降低分类不确定性的测试通常都是最好的测试。我们通常用熵(entropy)来度量信息的不确定性。以比特(bits)为计量单位,熵量化了一个变量的不确定性。熵计算公式如下所示: 其中, n是样本的数量, P(xi)是第i个样本的概率。 b一般取2, e或10 。因为对数函数中真数小于1则对数值为0, 因此, 公式前面加符号使熵为正数。 例如, 一个硬币投掷一次事件发生后一般有两种可能: 正面或反面。正面朝上的概率是0.5, 反面朝上的概率也是0.5。那么一个硬币投掷一次的结果这个变量的熵: 也就是说,...</p>
                <a href="http://www.shushilvshe.com/ml/dt.html">Read More</a>
                <hr class="uk-article-divider">
        </article>

    <ul class="uk-pagination">
<li><a href="http://www.shushilvshe.com/author/ssls2.html"><i class="uk-icon-angle-double-left"></i></a></li><li><a href="http://www.shushilvshe.com/author/ssls2.html">2</a></li>        <li class="uk-active"><span>3</span></li>
<li><a href="http://www.shushilvshe.com/author/ssls4.html"><i class="uk-icon-angle-double-right"></i></a></li><li><a href="http://www.shushilvshe.com/author/ssls4.html">4</a></li>    </ul>

</div>

        <div class="uk-width-medium-1-5 uk-hidden-small">

            <div class="uk-panel uk-panel-box">
                <form class="uk-search" action="search.html" data-uk-search>
                    <input class="uk-search-field tipue_search" type="search" name="q" id="tipue_search_input" autocomplete="off" placeholder="Search...">
                </form>
            </div>

            <div class="uk-panel uk-panel-box">
                <ul class="uk-nav uk-nav-side">
                    <li class="uk-nav-header">Categories</li>
                    <li ><a href="http://www.shushilvshe.com/category/data.html">Data</a></li>
                    <li ><a href="http://www.shushilvshe.com/category/food.html">food</a></li>
                    <li ><a href="http://www.shushilvshe.com/category/travel.html">travel</a></li>
                    <li class="uk-nav-header">Pages</li>

                    <li >
                        <a href="http://www.shushilvshe.com/pages/about.html">About ME</a>
                    </li>


                    <li class="uk-nav-divider"></li>
                    <li ><a href="http://www.shushilvshe.com/archives.html">Archives</a></li>
                </ul>
            </div>

            <div class="uk-panel uk-panel-box">
                <h3 class="uk-panel-title">Receive Updates</h3>
                <a rel="alternate" type="application/atom+xml" href="http://www.shushilvshe.com/None" class="mg-feed"><i class="uk-icon-rss uk-icon-medium"></i> ATOM</a>
            </div>


        </div>

    </div>

</div>

</main>

<footer class="mg-footer">
    <div class="uk-container uk-container-center uk-text-center">

        <div class="mg-icons-small uk-subnav uk-visible-small">
            <li><a rel="alternate" type="application/atom+xml" href="http://www.shushilvshe.com/None" class="uk-icon-button uk-icon-rss"></a></li>
        </div>

        <div class="mg-author uk-panel">
            <p></p>

            <p>Powered by <a href="http://blog.getpelican.com">Pelican</a>.<br class="uk-visible-small"> Theme <a href="https://github.com/lucachr/pelican-mg">mg</a> by <a href="https://github.com/lucachr">Luca Chiricozzi</a>.</p>
        </div>
    </div>
</footer>

<div id="mg-offcanvas" class="uk-offcanvas">
    <div class="uk-offcanvas-bar">

        <form class="uk-search" action="search.html" data-uk-search>
            <input class="uk-search-field" type="search" name="q" id="tipue_search_input" autocomplete="off" placeholder="Search...">
        </form>

        <ul class="uk-nav uk-nav-offcanvas" data-uk-nav>
            <li class="uk-nav-header">Categories</li>
            <li ><a href="http://www.shushilvshe.com/category/data.html">Data</a></li>
            <li ><a href="http://www.shushilvshe.com/category/food.html">food</a></li>
            <li ><a href="http://www.shushilvshe.com/category/travel.html">travel</a></li>
            <li class="uk-nav-header">Pages</li>
            <li >
                <a href="http://www.shushilvshe.com/pages/about.html">About ME</a>
            </li>


            <li class="uk-nav-divider"></li>
            <li><a href="http://www.shushilvshe.com/">Archives</a></li>
        </ul>
    </div>
</div>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="js/vendor/jquery-1.10.2.min.js"><\/script>')</script>
<script src="//cdnjs.cloudflare.com/ajax/libs/uikit/2.23.0/js/uikit.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/uikit/2.23.0/js/components/search.min.js"></script>
<script src="http://www.shushilvshe.com/theme/js/tipuesearch_set.js"></script>
<script src="http://www.shushilvshe.com/theme/js/tipuesearch.js"></script>
<script src="http://www.shushilvshe.com/theme/js/jquery.sticky-kit.js"></script>
<script src="http://www.shushilvshe.com/theme/js/plugins.js"></script>
<script src="http://www.shushilvshe.com/theme/js/main-search.js"></script>



</body>
</html>
